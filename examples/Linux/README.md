## Набор примеров
Набор примеров фаззинга Linux-приложений, в которых демонстрируется часть функционала `Crusher`:

1) `faad` - фаззинг аргументов командной строки;
2) `gpg` - фаззинг файла + ДСВ (динамическое символьное выполнение);
3) `jasper` - фаззинг файла + ДСВ;
4) `python` - фаззинг файла;
5) `stm32` - фаззинг ПО устройства ARM (на основе частичной эмуляции с Lua-Qemu);
6) `OpenSSL` - фаззинг OpenSSL-сервера: Peach Pit + ISP_PRELOAD.

Далее приведена последовательность действия по фаззингу, мониторингу и воспроизведению аварийных завершений (крешей) для следующих примеров: `faad`, `gpg`, `jasper` и `python`.
Для примеров `stm32` и `OpenSSL` подробные инструкции можно найти в фалах `README.md` в соответствующих директориях.

## Запуск фаззинга
В директории примера есть скрипт `fuzz.sh` для запуска фаззинга.
Данному скрипту нужно передать 2 опции:
* `-f </path/to/crusher/bin_x86-64/fuzz_manager>` - путь до исполняемого файла `fuzz_manager`;
* `-c <num>` - число ядер для фаззинга.

Результаты будут записываться в папку `out`.

Пример запуска фаззинга приложения:
```bash
./fuzz.sh -f /path/to/crusher/bin_x86-64/fuzz_manager -c 4
```

## Мониторинг фаззинга
Для мониторинга фаззинга нужно запустить в другом терминале `UI` (User Interface - пользовательский интерфейс) через исполняемый файл `./bin_86-64/ui` (из релиза `Crusher`), который принимает в качестве аргумента путь до соответствующей директории с результатами фаззинга.

Например, для мониторинга фаззинга приложения выполните команду (укажите актуальные пути):
```bash
/path/to/crusher/bin_x86-64/ui -o /path/to/out
```

В каждом примере фаззинг приводит к нахождению аварийных завершений (крешей).
В правом верхнем углу окна пользовательского интерфейса можно наблюдать окно `Stats`. В нём обратите внимание на поле `unique_crashes`.
Как только будет найдено аварийное завершение, значение поля `unique_crashes` станет ненулевым. Пока значение поля нулевое - не останавливайте фаззинг.
Желательно дождаться, когда значение поля будет больше 1. После этого можно остановить фаззинг:

* в терминале с `UI` (пользовательский интерфейс) - для выхода из `UI` нажмите кнопку `q`;
* в терминале с запущенным фаззингом завершите фаззинг по комбинации клавиш `Ctrl+C`.

## Воспроизведение аварийных завершений
1) Для получения списка найденных файлов-крешей выполните команду (укажите актуальный путь до out-директории):
```bash
find out -name id_crash_*
```

2) В скрипте `fuzz.sh` после символов `--` прописана команда запуска приложения. Например, для `gpg` она выглаядит так:
```bash
./gpg @@
```

Далее возможны 2 случая:
а) в случае фаззинга файла (как в примере `gpg`) - выполните вышеуказанную команду, заменив последовательность символов `@@` на один из путей к креш-файлу, полученных в пункте 1), например:
```bash
./gpg out/FUZZ-MASTER_0/crashes/id_crash_0
```

б) в случае фаззинга argv (аргументов командной строки, как в примере `faad`) - выполните вышеуказанную команду, заменив последовательность символов `@@` на `$(cat out/FUZZ-MASTER_0/crashes/id_crash_0)`,
где `out/FUZZ-MASTER_0/crashes/id_crash_0` - пример пути к креш-файлу, полученному в пункте 1).

Пример команды:
```bash
./faad $(cat out/FUZZ-MASTER_0/crashes/id_crash_0)
```

3) Наблюдаем аварийное завершение: сообщение в терминале, содержащее `Segmentation fault` или `Aborted`.
Если соответствующих сообщений не было выведено, то нужно повторить пункты 1)-3) на другом файле из списка, полученного в пункте 1).
